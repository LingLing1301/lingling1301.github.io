### 注意: 本内容仅提供给除中国大陆以外的人观看, 此外如你所在国家或地区中的法律或规定不允许使用或学习, 请不要查看!!

### 免责声明: 本内容仅提供给允许使用VPN/代理等内容的国家或地区的人, 如违反责任自行承担, 本账号以及账号持有者以及Github和微软概不负责!

**什么是浏览器指纹**

“浏览器指纹”是一种通过浏览器对网站可见的配置和设置信息来跟踪Web浏览器的方法，浏览器指纹就像我们人手上的指纹一样，  
具有个体辨识度，只不过现阶段浏览器指纹辨别的是浏览器。

人手上的指纹之所以具有唯一性，是因为每个指纹具有独特的纹路、这个纹路由凹凸的皮肤所形成。  
每个人指纹纹路的差异造就了其独一无二的特征。

那么浏览器指纹也是同理，获取浏览器具有辨识度的信息，进行一些计算得出一个值，那么这个值就是浏览器指纹。  
辨识度的信息可以是UA、时区、地理位置或者是你使用的语言等等，你所选取的信息决定了浏览器指纹的准确性。  

对于网站而言，拿到浏览器指纹并没有实际价值，真正有价值的是这个浏览器指纹对应的用户信息。  
作为网站站长，收集用户浏览器指纹并记录用户的操作，是一个有价值的行为，特别是针对没有用户身份的场景。  
例如在一个内容分发网站上，用户A喜欢浏览二次元的内容，通过浏览器指纹记录这个兴趣，  
那么下次用户不需要登录即可向A用户推送二次元的信息。在个人PC如此普及的当下，这也是一种内容分发的方式。

对于用户而言，建立个人上网行为与浏览器指纹之间的联系或多或少都有侵犯用户隐私的意味，  
特别是将你的浏览器指纹和真实的用户信息相关联起来的时候。所幸的是这种方式对于用户的隐私侵犯比较有限、  
滥用用户行为也会透支用户对网站的好感。

查看自己的浏览器指纹ID和基本信息: https://fingerprintjs.com/demo  

查看自己的http头部信息: https://httpbin.org/headers  

查看自己浏览器基本信息: https://www.whatismybrowser.com/  

测试网站推荐人: https://www.darklaunch.com/tools/test-referer  

测试Canvas: https://browserleaks.com/canvas  
测试WebGL: https://browserleaks.com/webgl  
测试Font: https://browserleaks.com/fonts  
过滤器插件识别: https://browserleaks.com/proxy  

```
{
    "headers": {
        "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
        "Accept-Encoding": "gzip, deflate, br",
        "Accept-Language": "zh-TW,zh-CN;q=0.9,zh;q=0.8,en;q=0.7,en-GB;q=0.6,en-US;q=0.5",
        "Dnt": "1",
        "Host": "httpbin.org",
        "Sec-Ch-Ua": "\"Google Chrome\";v=\"999\", \"Chromium\";v=\"999\", \"Not=A?Brand\";v=\"24\"",
        "Sec-Ch-Ua-Mobile": "?0",
        "Sec-Ch-Ua-Platform": "\"Windows\"",
        "Sec-Fetch-Dest": "document",
        "Sec-Fetch-Mode": "navigate",
        "Sec-Fetch-Site": "none",
        "Sec-Fetch-User": "?1",
        "Sec-Gpc": "1",
        "Upgrade-Insecure-Requests": "1",
        "User-Agent": "Mozilla/7.0 (Windows NT X 19.2; WOW64; x128) AppleWebKit/862.64 (KHTML, like Gecko) Chrome/999.2.6594.0 Safari/862.64",
        "X-Amzn-Trace-Id": "Root=1-64f6aa7a-3e3aacbd5e10956c4f2de00e"
    }
}
```

在上面我们可以看到浏览器的Accept-Language、User-Agent，通过前者可以拿到浏览器的语言信息，  
这个http头部实体信息可能是通过你当前的操作系统语言，或者浏览器设置的语言信息所生成的。  
这个头部也不一定准确，一些网站会直接忽略掉这个头部，通过用户的ip判断地区再决定呈现网页的语言。  


User-Agent包含了浏览器和操作系统的信息，例如我当前使用的是999版本的Chrome。假如在头部刻意伪造了UA，  
网页也可以通过navigator.userAgent来拿到真实的UA。

其他的基本信息，例如ip，物理地址、地理位置等也可以拿到：
![_image](https://github.com/LingLing1301/lingling1301.github.io/assets/65935235/0db5e5ea-84f9-459b-814b-1622fe06c834)

除开从http中拿到的指纹，也可以通过其他方式拿到浏览器的特性信息，在( https://panopticlick.eff.org/about )  
这篇文档中就陈列了一些可行的特征值

每个浏览器的用户代理字符串

浏览器发送的HTTP ACCEPT标头

屏幕分辨率和色彩深度

系统设置为时区

浏览器中安装的浏览器扩展/插件，例如Quicktime，Flash，Java或Acrobat，以及这些插件的版本

计算机上安装的字体，由Flash或Java报告。

浏览器是否执行JavaScript脚本

浏览器是否能种下各种cookie和“超级cookie（super cookies）”

通过Canvas指纹生成的图像的哈希

WebGL指纹生成的图像的哈希

是否浏览器设置为“Do Not Track”

系统平台（例如Win32，Linux x86）

系统语言（例如，cn,en-US）

浏览器是否支持触摸屏

拿到这些值后可以进行一些运算，得到浏览器指纹具体的信息熵以及浏览器的uuid。  
计算方式( https://www.eff.org/deeplinks/2010/01/primer-information-theory-and-privacy )。

下图是数个特征值的信息熵、重复概率和具体的值:  
![_image](https://github.com/LingLing1301/lingling1301.github.io/assets/65935235/675f6945-e9b4-4c0f-8a87-8bc0f091c193)

将上面的指纹信息综合起来，可以大大降低碰撞率，提高客户端uuid的准确性。指纹的也有权重之分，  
某些信息熵较大的特征值会有的更大的权重：

VariableEntropy(bits)user agent10.0plugins15.4fonts13.9video4.83supercookies6.09timezone3.04cookies   
enabled0.353

普通指纹描述的信息依然不够独特，毕竟在深圳使用MacOS的人依然非常非常多。高级指纹可以将这个范围进一步缩小，  
几乎可以直接确定一个独一无二的浏览器身份。

Canvas指纹 Canvas是HTML5中的动态绘图标签，也可以用它生成图片或者处理图片。即便使用Canvas绘制相同的元素，    
但是由于系统的差别，字体渲染引擎不同，对抗锯齿、次像素渲染等算法也不同，canvas将同样的文字转成图片，  
得到的结果也是不同的。流程如下
![_image](https://github.com/LingLing1301/lingling1301.github.io/assets/65935235/a255a666-7394-48d4-a226-c521b5a31f0b)

具体代码实现为: 
```
function getCanvasFingerprint () {
    var canvas = document.getElementById("anchor-uuid");
    var context = canvas.getContext("2d");
    context.font = "18pt Arial";
    context.textBaseline = "top";
    context.fillText("Hello, user.", 2, 2);
    return canvas.toDataURL("image/jpeg");
}
```

在画布上渲染一些文字，再用toDataURL转换出来，即便开启了隐私模式一样可以相同的值  
![_image](https://github.com/LingLing1301/lingling1301.github.io/assets/65935235/f590a4cd-b4b6-4e5a-9096-562a1dac63b6)

可以在这里( https://browserleaks.com/canvas )测试一下你canvas指纹。  
从下面的报告中Uniqueness中看到在47万份数据中，只有两个人的canvas指纹和这个相同
![_image](https://github.com/LingLing1301/lingling1301.github.io/assets/65935235/9f9f45fb-63a3-45e0-baab-34d2d2c1659f)

AudioContex指纹  
AudioContext指纹和Canvas类似也是基于硬件设备或者软件的差别，来产生不同的音频输出，然后计算得到不同的hash来作为标志，  
当然这里的音频并没有直接在浏览器中播放出来，只需要拿到播放前的处理数据就行，音频指纹测试地址：  
https://audiofingerprint.openwpm.com/  

WebRTC    
WebRTC（网页实时通信，Web Real Time Communication），是可以让浏览器有音视频实时通信的能力，  
它提供了三个主要的API来让JS可以实时获取和交换音视频数据，MediaStream、RTCPeerConnection和RTCDataChannel。  
当然如果要使用WebRTC获得通信能力，用户的真实ip就得暴露出来（NAT穿透），所以RTCPeerConnection就提供了这样的API，  
直接使用JS就可以拿到用户的IP地址。

跨浏览器指纹  
综上提到的浏览器指纹都是从同一个浏览器上获得。但是很多特征值都是不稳定的，  
例如UA、canvas指纹在相同设备的不同浏览器打开会完全不一样。  
同一套浏览器指纹算法在不同浏览器（本小结所说的不同浏览器是指同一台设备上的不同浏览器）上也就不可用了。  

跨浏览器指纹就是即便是在不同浏览器上也可以取得相同或者近似值的稳定浏览器特征。

跨浏览器指纹也有对应的研究成果

如浏览器特征值的在单浏览器和跨浏览器的信息熵以及稳定性，上诉说到的canvas指纹稳定性仅有8.17%。

常规的特征值很难满足在信息量足够的情况下还保持高稳定性。

挑选几个表中符合这些特征的值Task(a)~Task(r)、List of fonts（JS）、TimeZone和CPU Vritual cores、

Task(a)~Task(r)，它是一种显卡渲染(Rendering Tasks)图片的特征值。例如Task（a）Texture，  
它是测试常规片段着色器中的纹理功能，通过渲染一个随机的三基色值的像素，片段着色器需要在纹理中插入点，  
以便将纹理映射到模型上的每个点，这个插入算法在不同的显卡又是不一致的。如果纹理变化较大，那么差异也就越明显，  
我们可以通过记录这种差异来为这个显卡作出区分度。

List of fonts（JS），通过js获取页面支持的字体情况。获取页面支持的字体分为两种方式，Flash和JS，  
现在Flash渐渐退出了舞台就不考虑它了。List of fonts是值通过js拿到页面支持的字体情况以及如何绘制字体，  
是通过测量不同字体的文本HTML元素的填充尺寸，来和其他设备做区分。

TimeZone，时区，这个比较好理解，既然是同一台设备那么时区应该也是一致的。

![_image](https://github.com/LingLing1301/lingling1301.github.io/assets/65935235/69ee229b-81af-468f-9a53-acb873ad7651)

CUP Vritual cores即为CPU的内核数量，最简单的方法就是通过一个navigator.hardwareConcurrency来拿到。

尽管在低版本浏览器是不支持这个API的，但也可以通过这个polyfill拿到。实现原理大致为借用Web Worker的能力，  
监听payload的时间，计算量达到硬件最大并发的时候就可以得到内核的数量（有点硬核）。

**如何防范**  
如果你没有足够专业的知识或者非常频繁更换浏览器信息的话，几乎100%可以通过浏览器指纹定位到一个用户，  
当然这也不见得全是坏事。

泄露的隐私非常片面，只能说泄露了用户部分浏览网页时的行为。

价值不够，用户行为并未将实际的账户或者具体的人对应起来，产生的价值有限。

有益利用，利用浏览器指纹可以隔离部分黑产用户，防止刷票或者部分恶意行为。

但是即便如此，浏览器指纹也有一些可以防止的措施。

**Do Not Track**  
在http头部可以声明这样一个标志“DNT”意味“Do Not Track”，如果值为1表示为不要追踪我的网页行为，  
0则为可以追踪。即便没有cookie也可以通过这个标志符告诉服务器我不想被追踪到，不要记录我的行为。

不好的消息是大多数网站目前并没有遵守这个约定，完全忽略了“Do Not Track”这个信号。

EFF提供了这样一个工具Privacy Badger，它是一个浏览器插件形式的广告***，  
对于那些遵守这个约定的公司会在这个广告***的白名单上，允许显示广告，从而激励更多的公司遵守“Do Not Track”，  
以便完全展示广告。

个人觉得这一个方向很不错的做法，如果用户使用这个工具，网站在拿用户行为之前会抉择两边的利益，  
从而减轻用户对于隐私泄露的风险。

Privacy Badger的更多信息可以在这里（ https://www.eff.org/privacybadger ）查看。

**Tor Browser**  
通过上述我们对浏览器指纹的了解，不难发现，如果你浏览器的特征越多，越容易被追踪到。  
相反如果你想要刻意将某些浏览器特征隐藏或者进行魔改，那么恭喜你，你的浏览器可能就拥有了一个独一无二的浏览器指纹，  
都不需要刻意去计算，直接就可以将你和其他用户区分开。

所以有效的方法是尽量将特征值进行大众化，例如目前市面最广泛的搭配是Window 10 + Chrome，  
那么你将UA改为这个组合就是一个有效的方法，同时尽量避免网站获取信息熵非常高的特征值，例如canvas指纹。

Tor 浏览器在这上面做了很多工作，以防止它们被用来跟踪Tor用户，为了响应Panopticlick和其他指纹识别实验，  
Tor浏览器现在包含一些补丁程序，以防止字体指纹（通过限制网站可以使用的字体）  
和Canvas指纹（通过检测对HTML5 Canvas对象的读取并要求用户批准）来防止，例如上面获取Canvas指纹的代码，  
在Tor上会弹出如下警告 同时还可以将Tor浏览器配置为主动阻止JavaScript。

**[Canvas Fingerprint Defender](https://chrome.google.com/webstore/detail/canvas-fingerprint-defend/lanfdkkpgfjfdikkncbnojekcppdebfp)**

Canvas Fingerprint Defender是一种浏览器扩展或工具，旨在保护用户的隐私免受Canvas指纹识别技术的侵害。

Canvas指纹识别是一种在浏览器中使用HTML5的Canvas元素来生成唯一标识用户设备的方法。这种技术可用于跟踪用户的在线行为，  
而用户通常不会察觉到它。Canvas Fingerprint Defender的作用是干扰或阻止Canvas指纹识别的功能，从而提高用户的在线隐私。

这类工具通常通过修改浏览器的Canvas API，使其返回固定的、不变的图像，而不是根据用户设备的特定参数生成唯一的Canvas指纹。  
这样一来，Canvas指纹识别就会失效，从而保护用户的隐私

**[Ads Browser指纹浏览器](https://www.adspower.com/)**

Ads Browser指纹浏览器可能是一个特定的浏览器或浏览器插件的名称，它旨在帮助用户保护其在线隐私，  
特别是针对广告跟踪和指纹识别

广告跟踪 ：广告跟踪是指广告公司和网站使用各种技术来收集关于用户在线行为的信息，以更好地定制广告。  
Ads Browser可能会包含一些隐私保护功能，例如阻止第三方跟踪器或提供强化的隐私模式，以减少广告跟踪。

指纹浏览器 ：指纹浏览器是一种特殊的浏览器或浏览器插件，旨在对抗指纹识别技术。指纹识别是一种技术，  
通过分析浏览器和设备的唯一特征（如浏览器版本、操作系统、屏幕分辨率等）来识别和跟踪用户，  
即使他们不使用Cookies也能进行跟踪。指纹浏览器通常会尝试混淆或隐藏这些识别特征，以提高用户的隐私。

最安全的方案(全部安装,均设置为在InPrivate下允许):  

https://microsoftedge.microsoft.com/addons/detail/canvas-fingerprint-defend/giglaifdfkimffokoomllcpmdjeomckf  
https://microsoftedge.microsoft.com/addons/detail/webgl-fingerprint-defende/lhhnmkalnbgodjgjmjjbjalhcoeocffk  
https://microsoftedge.microsoft.com/addons/detail/font-fingerprint-defender/mcbggamjoifanjoomhddfhjenobpbljg  
https://addons.mozilla.org/en-US/firefox/addon/chameleon-ext/ (仅限Firefox)  
https://chrome.google.com/webstore/detail/referer-control/hnkcfpcejkafcihlgbojoidoihckciin (设置Block Javascript Referer: active, default referer for all other sites: Block)  
https://microsoftedge.microsoft.com/addons/detail/mdkdmaickkfdekbjdoojfalpbkgaddei (可能无法加载某些网页)  
https://microsoftedge.microsoft.com/addons/detail/ghostery-%E2%80%93-%E9%9A%B1%E7%A7%81%E5%BB%A3%E5%91%8A%E6%94%94%E6%88%AA%E5%99%A8/fclbdkbhjlgkbpfldjodgjncejkkjcme  
https://microsoftedge.microsoft.com/addons/detail/useragent-switcher-and-m/cnjkedgepfdpdbnepgmajmmjdjkjnifa (随便设置一个其他的User-Agent)  
https://microsoftedge.microsoft.com/addons/detail/webrtc-protect-protect-/lnnodkiklhcbkbflgphcklfoiagapkhc  

为了安全起见，阻止网站或软件查看你的隐私，你可以在系统中更改时区为其他地区，同时更改语言选项为其他语言显示，  
例如繁体中文，同时你需要确保你的浏览器已经禁用了第三方Cookie和开启了强制HTTPS(这些设置浏览器内部即可设置)

[参考]

https://www.finclip.com/news/f/13923.html

https://zhuanlan.zhihu.com/p/450097388















